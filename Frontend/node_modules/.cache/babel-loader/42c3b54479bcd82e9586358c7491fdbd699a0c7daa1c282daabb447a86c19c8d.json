{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { ref } from 'vue';\nexport const user = ref({\n  name: '',\n  email: ''\n});\nconst TOKEN_KEY = 'jwt';\nexport const saveToken = token => {\n  localStorage.setItem(TOKEN_KEY, token);\n};\nexport const getToken = () => {\n  return localStorage.getItem(TOKEN_KEY);\n};\nexport const isAuthenticated = () => {\n  getCurrentUser();\n  return user.value.name !== '';\n};\nexport function getCurrentUser() {\n  const token = localStorage.getItem(TOKEN_KEY);\n  if (!token) {\n    return null;\n  }\n  const parts = token.split('.');\n  if (parts.length !== 3) {\n    return null;\n  }\n  const decoded = atob(parts[1]);\n  const payload = JSON.parse(decoded);\n  console.log(payload);\n  user.value.name = payload.unique_name;\n  user.value.email = payload.email;\n  return payload;\n}\nexport const clearToken = () => {\n  localStorage.removeItem(TOKEN_KEY);\n};\nexport default {\n  saveToken,\n  getToken,\n  isAuthenticated,\n  clearToken,\n  getCurrentUser\n};","map":{"version":3,"names":["ref","user","name","email","TOKEN_KEY","saveToken","token","localStorage","setItem","getToken","getItem","isAuthenticated","getCurrentUser","value","parts","split","length","decoded","atob","payload","JSON","parse","console","log","unique_name","clearToken","removeItem"],"sources":["E:/Programming/Server/TimeFlow/Frontend/src/services/utils.js"],"sourcesContent":["import { ref } from 'vue';\r\n\r\nexport const user = ref({\r\n  name: '',\r\n  email: '',\r\n}); \r\n\r\nconst TOKEN_KEY = 'jwt';\r\n\r\nexport const saveToken = (token) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n};\r\n\r\nexport const getToken = () => {\r\n  return localStorage.getItem(TOKEN_KEY);\r\n};\r\n\r\n\r\nexport const isAuthenticated = () => {\r\n  getCurrentUser();\r\n  return user.value.name !== '';\r\n};\r\n\r\nexport function getCurrentUser() {\r\n  const token = localStorage.getItem(TOKEN_KEY);\r\n  if (!token) {\r\n      return null;\r\n  }\r\n\r\n  const parts = token.split('.');\r\n  if (parts.length !== 3) {\r\n      return null;\r\n  }\r\n\r\n  const decoded = atob(parts[1]);\r\n  const payload = JSON.parse(decoded);\r\n\r\n  console.log(payload);\r\n\r\n  user.value.name = payload.unique_name;\r\n  user.value.email = payload.email;\r\n  return payload;\r\n}\r\n\r\nexport const clearToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n};\r\n\r\nexport default {\r\n  saveToken,\r\n  getToken,\r\n  isAuthenticated,\r\n  clearToken,\r\n  getCurrentUser,\r\n};"],"mappings":";AAAA,SAASA,GAAG,QAAQ,KAAK;AAEzB,OAAO,MAAMC,IAAI,GAAGD,GAAG,CAAC;EACtBE,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE;AACT,CAAC,CAAC;AAEF,MAAMC,SAAS,GAAG,KAAK;AAEvB,OAAO,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAClCC,YAAY,CAACC,OAAO,CAACJ,SAAS,EAAEE,KAAK,CAAC;AACxC,CAAC;AAED,OAAO,MAAMG,QAAQ,GAAGA,CAAA,KAAM;EAC5B,OAAOF,YAAY,CAACG,OAAO,CAACN,SAAS,CAAC;AACxC,CAAC;AAGD,OAAO,MAAMO,eAAe,GAAGA,CAAA,KAAM;EACnCC,cAAc,CAAC,CAAC;EAChB,OAAOX,IAAI,CAACY,KAAK,CAACX,IAAI,KAAK,EAAE;AAC/B,CAAC;AAED,OAAO,SAASU,cAAcA,CAAA,EAAG;EAC/B,MAAMN,KAAK,GAAGC,YAAY,CAACG,OAAO,CAACN,SAAS,CAAC;EAC7C,IAAI,CAACE,KAAK,EAAE;IACR,OAAO,IAAI;EACf;EAEA,MAAMQ,KAAK,GAAGR,KAAK,CAACS,KAAK,CAAC,GAAG,CAAC;EAC9B,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;IACpB,OAAO,IAAI;EACf;EAEA,MAAMC,OAAO,GAAGC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAC,CAAC;EAC9B,MAAMK,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAC;EAEnCK,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC;EAEpBlB,IAAI,CAACY,KAAK,CAACX,IAAI,GAAGiB,OAAO,CAACK,WAAW;EACrCvB,IAAI,CAACY,KAAK,CAACV,KAAK,GAAGgB,OAAO,CAAChB,KAAK;EAChC,OAAOgB,OAAO;AAChB;AAEA,OAAO,MAAMM,UAAU,GAAGA,CAAA,KAAM;EAC9BlB,YAAY,CAACmB,UAAU,CAACtB,SAAS,CAAC;AACpC,CAAC;AAED,eAAe;EACbC,SAAS;EACTI,QAAQ;EACRE,eAAe;EACfc,UAAU;EACVb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}